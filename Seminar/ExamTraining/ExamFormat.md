# Задача: Онлайн Енциклопедия "KnowItAll"

Системата **KnowItAll** представлява онлайн енциклопедия, в която съдържанието е организирано в **тематични категории**, а всяка категория може да съдържа **други подкатегории** и **статии**. Статиите са текстове с произволно съдържание, в което новите редове са представени с "`\n`".

Всяка категория и всяка статия имат **име** (низ, съдържащ само малки латински букви и интервали), **дата на създаване** и **автор**. Категориите могат да се влачат една в друга, като така се изгражда йерархията на енциклопедията.

Системата може да **експортира** цялото съдържание на енциклопедията в **CSV формат**, където всяка категория или статия се представя с:

| Колона      | Съдържание                                                                                                |
| ----------- | --------------------------------------------------------------------------------------------------------- |
| `container` | Пълен път до родителската категория (коренът се отбелязва с "/", а всяка подкатегория е отделена със "/") |
| `name`      | Името на категорията или статията                                                                         |
| `type`      | "C" за категория и "A" за статия                                                                          |
| `content`   | Съдържанието на статията (при категориите е празно)                                                       |
| `author`    | Автор на елемента                                                                                         |
| `created`   | Дата на създаване във формат YYYY-MM-DD                                                                   |
| `tags`      | Ключови думи, разделени със запетая                                                                       |

Например, структурата:

```
/
 |- science
 |    |- physics
 |    |    |- relativity (A)
 |    |- chemistry
 |         |- periodic table (A)
 |- literature
      |- poetry (A)
```

ще се експортира като:

```
parent,name,type,content,author,created,tags
/,science,C,,admin,2024-01-15,education,research
/science,physics,C,,dr_smith,2024-01-16,science,physics
/science/physics,relativity,A,Space and time are relative.\nE=mc^2.,einstein_fan,2024-01-17,physics,theory,relativity
/science,chemistry,C,,prof_jones,2024-01-18,science,chemistry
/science/chemistry,periodic table,A,H, He, Li, Be, ...,mendeleev_student,2024-01-19,chemistry,elements,table
/,literature,C,,librarian,2024-01-20,arts,literature
/literature,poetry,A,Roses are red,\nViolets are blue.,poet_lover,2024-01-21,poetry,art,creative
```

---

## Изисквания:

1. Да се реализира **абстрактен клас `Item`**, описващ елемент в енциклопедията (категория или статия). `Item` трябва да съдържа:

   - `<подходящ тип> name()` – връща името на елемента
   - `<подходящ тип> size()` – виртуален метод за размер
   - **pure virtual метод `clone()`** - всеки наследяващ клас трябва да го имплементира за правилно копиране в полиморфни контейнери
   - **статичен метод `createFromType()`** - приема тип ("A" или "C") и параметри, връща указател към новосъздаден обект от подходящия тип (Factory pattern)

2. Да се реализира клас `Article`, наследяващ `Item`. За него:

   - Има поле със съдържанието на статията от подходящ тип
   - `size()` връща броя на символите в съдържанието
   - **operator<<** - извежда име и първите 50 символа от съдържанието

3. Да се реализира клас `Category`, наследяващ `Item`. Категорията:

   - Съдържа множество елементи
   - Има метод `addItem(<подходящ тип>)`, който добавя подкатегория или статия
   - `size()` връща сбора от размерите на всички вложени елементи
   - **Iterator pattern** - вложен клас `Iterator` за обхождане на елементите с методи `begin()` и `end()`, поддръжка на range-based for loop
   - **template метод `findByName<T>()`** - търси елемент от определен тип по име, връща указател към намерения елемент или nullptr
   - **operator<<** - извежда име и брой на елементите

4. Да се реализират нужните методи за **експортиране на цялата структура** в описания CSV формат.

5. Да се реализира **управление на динамичната памет**:

   - Коректно копиране/клониране на вложените елементи
   - Деструктори, които не позволяват изтичане на памет
   - **Оператор за присвояване** за всички класове с правилно управление на дълбоко копиране, проверка за самоприсвояване и освобождаване на стара памет
   - **Move конструктор и move assignment оператор** за оптимизация на преместването на големи обекти

6. Да се реализира **зареждане (десериализация)** на енциклопедията от CSV файл. Гарантира се, че родителите винаги са преди децата в CSV-а.

7. Да се добави **const correctness** навсякъде - всички методи, които не модифицират обекта, да са const, отделни const и non-const версии където е необходимо.

8. Да се реализира **exception handling** с персонализирани exception класове (`InvalidNameException`, `ItemNotFoundException`) и хвърляне на изключения при грешни операции.
